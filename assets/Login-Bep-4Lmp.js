import{r as h,u as k,a as x,c as o,b as e,w as n,v as w,d as g,e as i,F as v,f as _,g as S,o as t,t as f}from"./index-CJJd-li8.js";import{c as m,r as $,m as V,e as q,u as B}from"./index-e0zCWMZC.js";import{a as F}from"./axios-DoRVR6m2.js";const N={class:"form"},U=e("label",{for:"name"},"姓名(Name):",-1),D=e("br",null,null,-1),E=e("label",{for:"password"},"密碼(Password):",-1),I=e("br",null,null,-1),A=e("label",{for:"email"},"E-mail:",-1),P=e("br",null,null,-1),R=e("button",{type:"submit"},"登錄(Login)",-1),G={__name:"Login",setup(T){const d=h(""),p=h(""),c=h(""),b=k(),y={name:{required:m.withMessage("**姓名必須填寫**",$)},password:{required:m.withMessage("**密碼必須填寫**",$),minLength:m.withMessage("**密碼必須是4個數字**",V(4))},email:{required:m.withMessage("**email必須填寫**",$),email:m.withMessage("**不是一個有效的 e-mail 地址**",q)}},a=B(y,{name:d,password:p,email:c}),L=x(),M=async()=>{if(a.value.$touch(),!a.value.$invalid)try{const r=await F.post("/login",{name:d.value,password:p.value,email:c.value});console.log("Login response:",r.data),r.data.success?(b.login(r.data.userName,r.data.userId),L.push("/todoview")):alert("登入失敗，請檢查用戶姓名、密碼、email是否正確。")}catch{alert("登入過程出現錯誤，請重試。")}};return(r,l)=>(t(),o("div",N,[e("form",{id:"dataForm",onSubmit:S(M,["prevent"]),method:"post"},[U,n(e("input",{id:"name","onUpdate:modelValue":l[0]||(l[0]=s=>d.value=s),type:"text",placeholder:"請輸入姓名"},null,512),[[w,d.value]]),n(e("span",null,[(t(!0),o(v,null,_(i(a).name.$errors,(s,u)=>(t(),o("span",{key:u},f(s.$message),1))),128))],512),[[g,i(a).name.$error]]),D,E,n(e("input",{type:"password",id:"password",name:"password","onUpdate:modelValue":l[1]||(l[1]=s=>p.value=s),placeholder:"請輸入密碼"},null,512),[[w,p.value]]),n(e("span",null,[(t(!0),o(v,null,_(i(a).password.$errors,(s,u)=>(t(),o("span",{key:u},f(s.$message),1))),128))],512),[[g,i(a).password.$error]]),I,A,n(e("input",{id:"email","onUpdate:modelValue":l[2]||(l[2]=s=>c.value=s),type:"email",placeholder:"請輸入email"},null,512),[[w,c.value]]),n(e("span",null,[(t(!0),o(v,null,_(i(a).email.$errors,(s,u)=>(t(),o("span",{key:u},f(s.$message),1))),128))],512),[[g,i(a).email.$error]]),P,R],32)]))}};export{G as default};
