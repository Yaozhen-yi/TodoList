import{r as g,a as x,c as r,b as e,w as n,v,d as w,e as i,F as h,f,g as R,o as t,t as _}from"./index-CYo5kxzy.js";import{c as d,r as $,m as V,e as q,u as B}from"./index-DvlZUhY1.js";import{a as F}from"./axios-DoRVR6m2.js";const L={class:"form"},S=e("label",{for:"name"},"姓名(Name):",-1),U=e("label",{for:"password"},"密碼(Password):",-1),D=e("label",{for:"email"},"E-mail:",-1),E=e("br",null,null,-1),I=["disabled"],j={__name:"reginster",setup(N){const m=g(""),p=g(""),c=g(""),b=g(!1),y={name:{required:d.withMessage("**姓名必須填寫**",$)},password:{required:d.withMessage("**密碼必須填寫**",$),minLength:d.withMessage("**密碼必須是4個數字**",V(4))},email:{required:d.withMessage("**email必須填寫**",$),email:d.withMessage("**不是一個有效的 e-mail 地址**",q)}},a=B(y,{name:m,password:p,email:c}),M=x(),k=async()=>{if(a.value.$touch(),!a.value.$invalid)try{const o=await F.post("/register",{name:m.value,password:p.value,email:c.value});console.log("Registration response:",o),o.data.success?(console.log("id:",o.data.userId),alert("註冊成功！"),b.value=!0,M.push("/login")):alert("注册失败，可能是因为服务器返回了错误。")}catch(o){console.error("Registration error:",o),alert("注册过程出现错误，请检查控制台获取更多信息。")}};return(o,l)=>(t(),r("div",L,[e("form",{id:"dataForm",onSubmit:R(k,["prevent"]),method:"post"},[S,n(e("input",{id:"name","onUpdate:modelValue":l[0]||(l[0]=s=>m.value=s),type:"text",placeholder:"請輸入姓名"},null,512),[[v,m.value]]),n(e("span",null,[(t(!0),r(h,null,f(i(a).name.$errors,(s,u)=>(t(),r("span",{key:u},_(s.$message),1))),128))],512),[[w,i(a).name.$error]]),U,n(e("input",{type:"password",id:"password",name:"password","onUpdate:modelValue":l[1]||(l[1]=s=>p.value=s),placeholder:"請輸入密碼"},null,512),[[v,p.value]]),n(e("span",null,[(t(!0),r(h,null,f(i(a).password.$errors,(s,u)=>(t(),r("span",{key:u},_(s.$message),1))),128))],512),[[w,i(a).password.$error]]),D,n(e("input",{id:"email","onUpdate:modelValue":l[2]||(l[2]=s=>c.value=s),type:"email",placeholder:"請輸入email"},null,512),[[v,c.value]]),n(e("span",null,[(t(!0),r(h,null,f(i(a).email.$errors,(s,u)=>(t(),r("span",{key:u},_(s.$message),1))),128))],512),[[w,i(a).email.$error]]),E,e("button",{type:"submit",disabled:b.value},"註冊(Register)",8,I)],32)]))}};export{j as default};
